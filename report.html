<html>
<head>
<script type="text/javascript" src="ext/html/jquery.min.js"></script>
<script type="text/javascript" src="ext/html/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="ext/html/plugins/jqplot.highlighter.min.js"></script>

<link rel="stylesheet" type="text/css" href="ext/html/jquery.jqplot.min.css" />
<script type="text/javascript" src="ext/html/plugins/jqplot.cursor.min.js"></script>

<style type="text/css">
body {
	font-family: Verdana,Arial,Helvetica,sans-serif;
	font-size: 12px;
	margin: 1.2em;
}

.dna p {
	font-family: Courier;
	font-size: 6px;
	margin: 1.2em;
	white-space: pre;
}
</style>
</head>

<body>
<div id="log"></div>
<div id="toc"></div>
<div id="graphs" style="width:700px;">
<div id="histo"></div></br>
<div id="quality"></div></br>
<div id="gcratios"></div></br>
<div id="kmers"></div></br>
<div id="qhisto"></div></br>
</div>
</id>
</body>
<script>
var region=[];
var histo=[];
var qualities=[];
</script>


<script src="./data.js"></script>

<script>
$(document).ready(function(){
var plotoptions={
	axes:{yaxis:{min:0}, xaxis:{}}, 
	series:[ {color:'#1FAB78', showMarker: false, shadow: false, label: 'Depth'}, 
		{color:'#FF0078', showMarker: false, shadow: false, label:  'Fuzzy Depth'},
		{color:'#00FF78', showMarker: false, shadow: false, label:  'Control'},
		], 
	legend: {show: true},
	highlighter: {
			show: true, 
			sizeAdjust: 7.5
	},
	cursor:{ 
	        show: true,
	        zoom:true, 
	        showTooltip:false
	       } 
	 };

var table='<table border="1" cellpadding="4"><tr><th>Type</th><th>Locus</th><th>Annotation(s)</th></tr>';

for(n=0; n < region.length; ++n) {
	$("#graphs").append('<a id="anchor'+n+'"></a><div id="region'+n+'"></div><br/>'+region[n].annotations+'<br/><div class="dna"><p>'+region[n].picture+"</p></div><hr/>");
	plotoptions.title=region[n].name+" "+n+" ["+region[n].pos+"]"; 
	$.jqplot('region'+n,  [region[n].depth], plotoptions); 
	table+=('<tr><td><a href="#anchor'+n+'">'+region[n].name+' '+n+'</a></td><td>'+region[n].pos+'</td><td>'+region[n].annotations+'</td></tr>');
}
$("#toc").html(table+"</table>");

plotoptions.axes.xaxis.min=0;
plotoptions.title="Histogram of depth";
plotoptions.series[0].label="Frequency";
$.jqplot('histo', [histo], plotoptions);

plotoptions.axes.xaxis.min=0;
// plotoptions.axes.xaxis.max=150;
plotoptions.title="Reported quality per offset of read";
plotoptions.series[0].label="Reported Q-score";
plotoptions.series[1].label="Actual Q-score";
plotoptions.series[2].label="Control Q-score";

if(typeof controlQ == 'undefined')
	controlQ=[];

if(typeof referenceQ == 'undefined')
	referenceQ=[];


if(typeof gcRatios == 'undefined')
	gcRatios=[];

	
$.jqplot('quality', [qualities,referenceQ,controlQ], plotoptions);

plotoptions.title="GC-content per read position";
plotoptions.series[0].label="GC-content";
$.jqplot('gcratios', [gcRatios], plotoptions);

plotoptions.title="K-mer uniformity per read position";
plotoptions.series[0].label="Variance";
$.jqplot('kmers', [kmerstats], plotoptions);

plotoptions.title="Distribution of Quality";
plotoptions.series[0].label="Quality";

plotoptions.axes.xaxis.min=0;
plotoptions.axes.xaxis.max=42;

$.jqplot('qhisto', [qhisto], plotoptions);

if(typeof antonieLog != 'undefined')
	$("#log").html("<pre>"+antonieLog+"</pre>");
 
});
</script>
</body>
</html>
